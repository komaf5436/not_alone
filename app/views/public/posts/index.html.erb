<h1>投稿一覧</h1>

<div>
  <%= search_form_for @q, url: search_posts_path do |f| %>
    <%=f.search_field :title_cont %>
    <%= f.submit "検索" %>
  <% end %>
</div>

<div>
  <table>
    <tbody>
      <% @tag_list.each do |list| %>
        <tr>
          <td>
            <%= link_to tag_search_tag_path(tag_id: list.id) do %>
              <%= list.name %>
            <% end %>
            <%= "(#{list.posts.count})" %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>

<%= link_to '新規', new_post_path %>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Title</th>
      <th></th>
      <th></th>
      <th></th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @posts.each do |post| %>
    <tr id="post_<%= post.id %>">
      <td>
        <%= link_to user_path(post.user.id) do %>
          <%= post.user.name %>
        <% end %>
      </td>
      <td>
        <%= link_to post_path(post.id) do %>
          <%= post.title %>
        <% end %>
      </td>
      <td class="favorite-btn">
        <%= render "public/favorites/favorite-btn", post: post %>
      </td>
      <% if post.user_id == current_user.id %>
      <td>
        <%= link_to "編集", edit_post_path(post.id) %>
      </td>
      <td>
        <%= link_to "削除", post_path(post.id), method: :delete %>
      </td>
      <% end %>
    </tr>
    <% end %>
  </tbody>
</table>